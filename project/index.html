<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="../main.css">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon" />
    <title>Project</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.40.1/mapbox-gl.css' rel='stylesheet' />
    <style>
    #reset_extent {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 90%;
        height: 40px;
        padding: 10px;
        border: 1.5px solid #d2cbc0;
        border-radius: 3px;
        font-size: 16px;
        text-align: center;
        color: #d2cbc0;
        background: #877348;
    }

    #fly_kaimanawas {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 90%;
        height: 40px;
        padding: 10px;
        border: 1.5px solid #d2cbc0;
        border-radius: 3px;
        font-size: 16px;
        text-align: center;
        color: #d2cbc0;
        background: #877348;
    }
    #fly_kaimais {
        display: block;
        position: relative;
        margin: 0px auto;
        width: 90%;
        height: 40px;
        padding: 10px;
        border: 1.5px solid #d2cbc0;
        border-radius: 3px;
        font-size: 16px;
        text-align: center;
        color: #d2cbc0;
        background: #877348;
    }

    #menu {
        background: rgba(210, 203, 192, 0.7);
        position: absolute;
        z-index: 1;
        top: 30px;
        right: 10px;
        border-radius: 3px;
        width: 120px;
        border: 1px solid #332c23;
        font-family: 'Open Sans', sans-serif;
    }

    #menu a {
        font-size: 13px;
        color: #332c23;
        display: block;
        margin: 0;
        padding: 0;
        padding: 10px;
        text-decoration: none;
        border-bottom: 1px solid #332c23;
        text-align: center;
    }

    #menu a:last-child {
        border: none;
    }

    #menu a:hover {
        background-color: rgba(210, 203, 192, 0.7);
        color: #332c23;
    }

    #menu a.active {
        background-color: rgba(135, 115, 72, 0.7);
        color: #332c23;
    }

    #menu a.active:hover {
        background: rgba(210, 203, 192, 0.7);
    }

    </style>
  </head>
  <body>
    <div class="navbar navbar-custom navbar-static-top">
      <div class="container">

        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#my-navbar">
            <span class="sr-only">Toggle Navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <img src="../images/logo4.png" alt="logo">
          <a class="navbar-brand" href="../">Will Marson | Geog 774 | 2017</a>
        </div>

        <div class="collapse navbar-collapse" id="my-navbar">
          <ul class="nav navbar-nav">
            <li><a href="../">Home</a></li>
            <li><a href="../lab 2/">Lab 2</a></li>
            <li><a href="../lab 3/">Lab 3</a></li>
            <li><a href="../lab 4/">Lab 4</a></li>
            <li><a href="../lab 5/">Lab 5</a></li>
            <li class="active"><a href="../project/">Project</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <h1>Final Project - "The NZ Hunter's Map"</h1>
      <p>The map below shows two popular hunting blocks in North Island of New Zealand. Click one of the buttons below the legend to zoom in on a hunting area. Upon zooming in, slope aspect information for the block will appear. Slope aspect displays the orientation of each slope face (refer to the legend), allowing you to make an educated guess as to where game may be residing depending on the weather conditions. To show more details of a particular hunting block, hover over the little tree symbol.
        <br><br>After zooming to a hunting block, the buttons on the map allow you to turn off/on some layers. You can hover over a campsite or hut to reveal its name.
        <br><br>Clicking on the map will allow you to draw a path or line, the length of which will be displayed in the top left of the map. To undo a point, click on the point you wish to remove. This is a handy tool for working out the distance you may need to walk or shoot.
        <br><br>Use the MetService Weather Widgets to help you better plan your trip (you may need to "load unsafe scripts" via the URL bar to view this). Click on the widget to visit the MetService website for a more detailed forecast.
        <br><br>At any time, click the "Reset Extent" button to return to the map to the starting extent.</p>
        <p id="datasource"><i>Digital Elevation Model data used for creating the slope aspect layers were retrieved from <a href="https://data.linz.govt.nz/">LINZ Data Service, 2017.</a><br>Department of Conservation (DOC) Data retrieved from <a href="https://koordinates.com/">Koordinates, 2017.</a></i></p>


    </div>

      <div class="container">


          <div class="col-sm-6" id='map'style='width: 70%; height: 710px;'>


          <style type='text/css'>
              #info {
                  display: block;
                  position: relative;
                  margin: 0px auto;
                  width: 100%;
                  padding: 1px;
                  border: none;
                  border-radius: 3px;
                  font-size: 12px;
                  text-align: center;
                  color: #d2cbc0;
                  background: #332c23;
              }
          </style>



          <style>
          .distance-container {
              position: absolute;
              top: 30px;
              left: 20px;
              z-index: 1;
          }

          .distance-container > * {
              background-color: rgba(135, 115, 72, 0.7);
              color: #332c23;
              font-size: 13px;
              line-height: 18px;
              display: block;
              margin: 0;
              padding: 5px 10px;
              border-radius: 3px;
              border: 1px solid #332c23;
              font-family: 'Open Sans', sans-serif;
          }

          .mapboxgl-popup {
              max-width: 400px;
              font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
          }
          </style>



            <nav id="menu"></nav>
            <div id="map"></div>
            <div id='distance' class='distance-container'></div>
            <div id='info'></div>

<script src='https://api.mapbox.com/mapbox.js/plugins/turf/v2.0.2/turf.min.js'></script>
            <script>
              mapboxgl.accessToken = 'pk.eyJ1Ijoid21hcjEwMyIsImEiOiJjajY4emJoZmowazBpMndxcjFtZjNzcWc5In0.DP_eav3mOX6CgiZu2UvO-g';
                var map = new mapboxgl.Map({
                  container: 'map',
                  style: 'mapbox://styles/wmar103/cj90ocks7j0sg2rnzserdjfd1',
                  center:[175.7,-38.5],
                  zoom: 5.7,
                });



                map.on('mousemove', function (e) {
                    document.getElementById('info').innerHTML =
                        // e.lngLat is the longitude, latitude geographical position of the event
                        JSON.stringify(e.lngLat);
                });

                var distanceContainer = document.getElementById('distance');

                // GeoJSON object to hold our measurement features
                var geojson = {
                    "type": "FeatureCollection",
                    "features": []
                };

                // Used to draw a line between points
                var linestring = {
                    "type": "Feature",
                    "geometry": {
                        "type": "LineString",
                        "coordinates": []
                    }
                };

                map.on('load', function() {
                    map.addSource('geojson', {
                        "type": "geojson",
                        "data": geojson
                    });

                    // Add styles to the map
                    map.addLayer({
                        id: 'measure-points',
                        type: 'circle',
                        source: 'geojson',
                        paint: {
                            'circle-radius': 5,
                            'circle-color': '#000'
                        },
                        filter: ['in', '$type', 'Point']
                    });
                    map.addLayer({
                        id: 'measure-lines',
                        type: 'line',
                        source: 'geojson',
                        layout: {
                            'line-cap': 'round',
                            'line-join': 'round'
                        },
                        paint: {
                            'line-color': '#000',
                            'line-width': 2.5
                        },
                        filter: ['in', '$type', 'LineString']
                    });

                    map.on('click', function(e) {
                        var features = map.queryRenderedFeatures(e.point, { layers: ['measure-points'] });

                        // Remove the linestring from the group
                        // So we can redraw it based on the points collection
                        if (geojson.features.length > 1) geojson.features.pop();

                        // Clear the Distance container to populate it with a new value
                        distanceContainer.innerHTML = '';

                        // If a feature was clicked, remove it from the map
                        if (features.length) {
                            var id = features[0].properties.id;
                            geojson.features = geojson.features.filter(function(point) {
                                return point.properties.id !== id;
                            });
                        } else {
                            var point = {
                                "type": "Feature",
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [
                                        e.lngLat.lng,
                                        e.lngLat.lat
                                    ]
                                },
                                "properties": {
                                    "id": String(new Date().getTime())
                                }
                            };

                            geojson.features.push(point);
                        }

                        if (geojson.features.length > 1) {
                            linestring.geometry.coordinates = geojson.features.map(function(point) {
                                return point.geometry.coordinates;
                            });

                            geojson.features.push(linestring);

                            // Populate the distanceContainer with total distance
                            var value = document.createElement('pre');
                            value.textContent = 'Total distance: ' + turf.lineDistance(linestring).toLocaleString() + 'km';
                            distanceContainer.appendChild(value);
                        }

                        map.getSource('geojson').setData(geojson);
                    });
                });

                map.on('mousemove', function (e) {
                    var features = map.queryRenderedFeatures(e.point, { layers: ['measure-points'] });
                    // UI indicator for clicking/hovering a point on the map
                    map.getCanvas().style.cursor = (features.length) ? 'pointer' : 'crosshair';
                });

//end of distance tool

                map.on('load', function () {
                  map.addSource('DOC Tracks',{
                    type:'vector',
                    url:'mapbox://wmar103.cj96vvug100n432n36uagih5p-6yb6t'
                    });
                map.addLayer({
                  "id":"DOC Tracks",
                  "type":"line",
                  "source":"DOC Tracks",
                  "source-layer":"hunting_doc_tracks",
                  "layout":{
                    "visibility":"visible",
                    "line-join":"round",
                    "line-cap":"round"
                  },
                  "paint":{
                    "line-color":"#ff0000",
                    "line-width":2
                  }
                });




                var toggleableLayerIds = [ 'DOC Campsites','DOC Huts', 'DOC Tracks' ];

                for (var i = 0; i < toggleableLayerIds.length; i++) {
                    var id = toggleableLayerIds[i];

                    var link = document.createElement('a');
                    link.href = '#';
                    link.className = 'active';
                    link.textContent = id;

                    link.onclick = function (e) {
                        var clickedLayer = this.textContent;
                        e.preventDefault();
                        e.stopPropagation();

                        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

                        if (visibility === 'visible') {
                            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
                            this.className = '';
                        } else {
                            this.className = 'active';
                            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
                        }
                    };

                    var layers = document.getElementById('menu');
                    layers.appendChild(link);
                }

//HUTS
map.addLayer({
    "id": "DOC Huts",
    "type": "symbol",
    "source": {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": [{
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [
                  176.11167506244018,
                  -39.05795105728087
                ]
              },
              "properties": {
                "STATUS": "OPEN",
                "DESCRIPTIO": "Cascade Hut",
                "CATEGORY_D": "Buildings",
                "OBJECT_TYP": "Standard Hut"
              }
            },
            {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [
                  176.26481128143067,
                  -39.075434264066224
                ]
              },
              "properties": {
                "STATUS": "OPEN",
                "DESCRIPTIO": "Oamaru Hut",
                "CATEGORY_D": "Buildings",
                "OBJECT_TYP": "Standard Hut"
              }
            },
            {
              "type": "Feature",
              "geometry": {
                "type": "Point",
                "coordinates": [
                  175.95825984194522,
                  -39.123882197373575
                ]
              },
              "properties": {
                "STATUS": "OPEN",
                "DESCRIPTIO": "Waipakihi Hut",
                "CATEGORY_D": "Buildings",
                "OBJECT_TYP": "Standard Hut"
                }
            },
            {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.80628832039457,
          -37.52624516123427
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Waitawheta Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Serviced Hut"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.76299137342212,
          -37.484582076081615
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Daly's Clearing Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Standard Hut"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.8306815341054,
          -37.586052480857084
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Te Rereatukahia Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Standard Hut"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.86119255512648,
          -37.66508700341928
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Kauritatahi Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Basic Hut/bivvy"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.89566817004848,
          -37.788102016043744
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Mangamuka Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Basic Hut/bivvy"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.92839279546172,
          -37.81750390833001
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Hurunui Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Basic Hut/bivvy"
      }
    },
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.84075754721803,
          -37.62202404519294
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Motutapere Hut",
        "CATEGORY_D": "Buildings",
        "OBJECT_TYP": "Basic Hut/bivvy"
      }
    }
             ]
        }
    },
    "layout": {
        "icon-image": "lodging-15",
        "icon-allow-overlap": true
    }
});



// Create a popup, but don't add it to the map yet.
var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
});

map.on('mouseenter', 'DOC Huts', function(e) {
    // Change the cursor style as a UI indicator.
    map.getCanvas().style.cursor = 'pointer';

    // Populate the popup and set its coordinates
    // based on the feature found.
    popup.setLngLat(e.features[0].geometry.coordinates)
        .setHTML(e.features[0].properties.DESCRIPTIO)
        .addTo(map);
});
map.on('mouseleave', 'DOC Huts', function() {
    map.getCanvas().style.cursor = '';
    popup.remove();
});

//HUTS END

//CAMPSITES

// Add a layer showing DOC Campsites(for the popup).
map.addLayer({
    "id": "DOC Campsites",
    "type": "symbol",
    "source": {
        "type": "geojson",
        "data": {
            "type": "FeatureCollection",
            "features": [{
              "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        175.82306576428064,
                        -39.15418314809367
                      ]
                    },
                    "properties": {
                      "STATUS": "OPEN",
                      "DESCRIPTIO": "Urchin Campsite",
                      "CATEGORY_D": "Amenity Areas",
                      "OBJECT_TYP": "Basic campsite"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        175.82617529795698,
                        -39.1373421875887
                      ]
                    },
                    "properties": {
                      "STATUS": "OPEN",
                      "DESCRIPTIO": "Kaimanawa Road Campsite",
                      "CATEGORY_D": "Amenity Areas",
                      "OBJECT_TYP": "Basic campsite"
                    }
                  },
                  {
                    "type": "Feature",
                    "geometry": {
                      "type": "Point",
                      "coordinates": [
                        175.830478737388,
                        -39.13705750238595
                      ]
                    },
                    "properties": {
                      "STATUS": "OPEN",
                      "DESCRIPTIO": "Waikoko valley campsite",
                      "CATEGORY_D": "Amenity Areas",
                      "OBJECT_TYP": "Basic campsite"
                }
            },
            {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          175.7472348253124,
          -37.438137602133786
        ]
      },
      "properties": {
        "STATUS": "OPEN",
        "DESCRIPTIO": "Dickey Flat Campsite",
        "CATEGORY_D": "Amenity Areas",
        "OBJECT_TYP": "Standard campsite"
      }
    }
             ]
        }
    },
    "layout": {
        "icon-image": "campsite-15",
        "icon-allow-overlap": true
    }
});



// Create a popup, but don't add it to the map yet.
var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
});

map.on('mouseenter', 'DOC Campsites', function(e) {
    // Change the cursor style as a UI indicator.
    map.getCanvas().style.cursor = 'pointer';

    // Populate the popup and set its coordinates
    // based on the feature found.
    popup.setLngLat(e.features[0].geometry.coordinates)
        .setHTML(e.features[0].properties.DESCRIPTIO)
        .addTo(map);
});
map.on('mouseleave', 'DOC Campsites', function() {
    map.getCanvas().style.cursor = '';
    popup.remove();
});



//CAMPSITES END

//MARKERS & PLACES



    // Add a layer showing places(for the popup) & markers.
    map.addLayer({
        "id": "places",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                  {
                    "type": "Feature",
                    "properties": {
                        "title": "Kaimanawa Forest Park",
                        "description": "<strong>Kaimanawa Forest Park</strong><h2><a href=\"http://www.doc.govt.nz/parks-and-recreation/things-to-do/hunting/where-to-hunt/central-north-island/turangi-taupo-hunting/where-to-hunt/kaimanawa-forest-park-hunting/\" target=\"_blank\" title=\"Opens in a new window\">Kaimanawa Forest Park</a> is home to the only large wild herd of sika deer in the southern hemisphere, as well as red deer and pigs. This is one of the most popular hunting areas in New Zealand. Permits can be obtained <a href=\"https://huntingpermits.doc.govt.nz/huntingpermits/start\" target=\"_blank\" title=\"Opens in a new window\">here.</a></h2>",
                        "icon": ""
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [176.065, -39.1]
                    }
                },
                {
                  "type": "Feature",
                  "properties": {
                      "title": "Kaimai Mamaku Conservation Park",
                      "description": "<strong>Kaimai Mamaku Conservation Park</strong><h2><a href=\"http://www.doc.govt.nz/parks-and-recreation/things-to-do/hunting/where-to-hunt/bay-of-plenty/tauranga-area-hunting/where-to-hunt/kaimai-mamaku-forest-park/?region=bayofplenty&activity=hunting#activitypanel\" target=\"_blank\" title=\"Opens in a new window\">Kaimai Mamaku Conservation Park</a> is a popular hunting area in the Bay of Plenty, where hunters can find red deer, pigs and goats. Permits can be obtained <a href=\"https://huntingpermits.doc.govt.nz/huntingpermits/start\" target=\"_blank\" title=\"Opens in a new window\">here.</a></h2>",
                      "icon": ""
                  },
                  "geometry": {
                      "type": "Point",
                      "coordinates": [175.9, -37.74]
                  }
              },
                 ]
            }
        },
        "layout": {
            "icon-image": "park-15",
            "icon-allow-overlap": true
        }
    });

    map.addLayer({
        "id": "markers",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                  {
                    "type": "Feature",
                    "properties": {
                        "title": "Kaimanawa Forest Park",
                        "icon": ""
                    },
                    "geometry": {
                        "type": "Point",
                        "coordinates": [176.065, -39.1]
                    }
                },
                {
                  "type": "Feature",
                  "properties": {
                      "title": "Kaimai Mamaku Conservation Park",
                      "icon": ""
                  },
                  "geometry": {
                      "type": "Point",
                      "coordinates": [175.9, -37.74]
                  }
              },
                 ]
            }
        },
        "layout": {
            "icon-image": "park-15",
            "icon-allow-overlap": true
        }
    });

    map.addLayer({
          "id":"markers",
          "type":"symbol",
          "source":"markers",
          "layout":{
            "icon-image":"",
            "text-field": "{title}",
            "text-font":["Open Sans Condensed Bold","Arial Unicode MS Regular"],
            "text-offset":[0,0.9],
            "text-size":14,
            "text-anchor":"top",
            "text-allow-overlap": true


          },
          "paint": {
            "text-color":"#332c23",
            "text-halo-color":"#000000",
            "text-halo-width": 0,
            "text-halo-blur": 0
          }
        });

    // Create a popup, but don't add it to the map yet.
    var popup = new mapboxgl.Popup({
        closeButton: true,
        closeOnClick: false
    });

    map.on('mouseenter', 'places', function(e) {
        // Change the cursor style as a UI indicator.
        map.getCanvas().style.cursor = 'pointer';

        // Populate the popup and set its coordinates
        // based on the feature found.
        popup.setLngLat(e.features[0].geometry.coordinates)
            .setHTML(e.features[0].properties.description)
            .addTo(map);
    });





//MARKERS & PLACES END









  map.setLayerZoomRange('DOC Campsites',9,0);
  map.setLayerZoomRange('DOC Huts',9,0);
  map.setLayerZoomRange('DOC Tracks',8,0);

});



            </script>

          </div>

          <div class="col-sm-6" id="legend"style='width: 30%; height: 700px;'>

  <br>
          <div class='map_legend' style='background:#877348; border: 1.5px solid #d2cbc0;
          border-radius: 3px; padding: 10px; width: 300px;'>
          <div class='legend-title'>Slope Aspect</div>
          <div class='legend-scale'>
            <ul class='legend-labels'>
              <li><span style='background:rgba(255, 241, 0, 0.6);'></span>North</li>
              <li><span style='background:rgba(34, 172, 56, 0.6);'></span>North East</li>
              <li><span style='background:rgba(0, 158, 150, 0.6);'></span>East</li>
              <li><span style='background:rgba(0, 134, 209, 0.6);'></span>South East</li><br/>
              <li><span style='background:rgba(29, 32, 136, 0.6);'></span>South</li>
              <li><span style='background:rgba(190, 0, 129, 0.6);'></span>South West</li>
              <li><span style='background:rgba(230, 0, 79, 0.6);'></span>West</li>
              <li><span style='background:rgba(235, 97, 0, 0.6);'></span>North West</li>
            </ul>
          </div>
          <div class='legend-source'></div>
          </div>
<br>

          <div class='map_buttons' style='background:#877348; border: 1.5px solid #d2cbc0;
          border-radius: 3px; padding: 10px; width: 300px;'>
          <div class='buttons-title'>Map Buttons</div>
          <button id='reset_extent'>Reset Extent</button>
          <button id='fly_kaimanawas'>Kaimanawas</button>
          <button id='fly_kaimais'>Kaimais</button>

      <script>
      document.getElementById('reset_extent').addEventListener('click', function () {

      map.flyTo({
        center:[175.7,-38.5],
        zoom: 5.7,
      });
      });

      document.getElementById('fly_kaimanawas').addEventListener('click', function () {

      map.flyTo({
      center: [176.065,-39.1],
      zoom: 9.7,
      });
      });
      document.getElementById('fly_kaimais').addEventListener('click', function () {

      map.flyTo({
      center: [175.9, -37.74],
      zoom: 9.2,
      });
      });
      </script>
          </div>
<br>
<div id="metservice-widget">
<script language="JavaScript" type="text/javascript">
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src", "http://www.metservice.com/weather-widget/widget?params=blue|small|portrait|days-3|classic&loc=Tauranga&domain=" + document.location.hostname);
ifrm.style.width = 300+"px";
ifrm.style.height =168+"px";
ifrm.style.border = "0";
ifrm.setAttribute("allowtransparency", "true");
ifrm.setAttribute("id", "widget-iframe");
document.getElementById('metservice-widget').appendChild(ifrm);
</script>
</div>
<div id="metservice-widget">
<script language="JavaScript" type="text/javascript">
ifrm = document.createElement("IFRAME");
ifrm.setAttribute("src", "http://www.metservice.com/weather-widget/widget?params=blue|small|portrait|days-3|classic&loc=Taupo&domain=" + document.location.hostname);
ifrm.style.width = 300+"px";
ifrm.style.height =168+"px";
ifrm.style.border = "0";
ifrm.setAttribute("allowtransparency", "true");
ifrm.setAttribute("id", "widget-iframe");
document.getElementById('metservice-widget').appendChild(ifrm);
</script>
</div>


  </div>



          <style type='text/css'>
            .map_legend .legend-title {
              text-align: left;
              margin-bottom: 8px;
              font-weight: bold;
              font-size: 18px;
              color: #d2cbc0;
              }
            .map_legend .legend-scale ul {
              margin: 0;
              padding: 0;
              float: left;
              list-style: none;
              }
            .map_legend .legend-scale ul li {
              display: block;
              float: left;
              width: 65px;
              margin-bottom: 6px;
              text-align: center;
              font-size: 80%;
              list-style: none;
              color: #d2cbc0;
              }
            .map_legend ul.legend-labels li span {
              display: block;
              float: left;
              height: 15px;
              width: 65px;
              }
            .map_legend .legend-source {
              font-size: 85%;
              color: #d2cbc0;
              clear: both;
              }
            .map_legend a {
              color: #3e3eaa;
              }

              .map_buttons .buttons-title {
                text-align: left;
                margin-bottom: 8px;
                font-weight: bold;
                font-size: 18px;
                color: #d2cbc0;
                }
                .map_buttons a {
                  color: #d2cbc0;
                  }
          </style>




    </div>
</div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>
